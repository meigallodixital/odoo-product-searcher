<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <!--- Product Search Views -->
  <record id="view_product_searcher_tree" model="ir.ui.view">
    <field name="name">product.searcher_tree</field>
    <field name="model">product.searcher</field>
    <field name="arch" type="xml">
      <tree string="Product Searches"
            editable="top"
            decoration-success="status=='approved'"
            decoration-danger="status=='cancel'"
            decoration-warning="status=='process'">
        <field name="operating_unit_id"
               groups="product_searcher.group_product_searcher_operator"/>
        <field name="client"/>
        <field name="product_name"/>
        <field name="description"/>
        <field name="phone" widget="phone"/>
        <field name="email" widget="email"/>
        <field name="max_price" options="{'currency_field': 'currency_id'}"/>
        <field name="quality"/>
        <field name="max_date"/>
        <field name="status"/>
        <field name="applicant_id"/>
        <field name="notify_date"/>
        <field name="buy_date"/>
      </tree>
    </field>
  </record>

  <record id="view_product_searcher_kanban" model="ir.ui.view">
    <field name="name">product.searcher_kanban</field>
    <field name="model">product.searcher</field>
    <field name="arch" type="xml">
      <kanban string="Product Searches" group_create="false" default_group_by="operating_unit_id">
          <field name="id"/>
          <field name="product_name"/>
          <field name="client"/>
          <field name="max_price"/>
          <field name="operating_unit_id" groups="product_searcher.group_product_searcher_operator" />
            <templates>
              <t t-name="kanban-box">
                <div t-attf-class="oe_kanban_content oe_kanban_global_click">
                  <div class="oe_kanban_card">
                    <div>
                        <strong class="o_kanban_record_title"><span><field name="product_name"/></span></strong>
                    </div>
                    <div>
                        <span class="o_kanban_record_subtitle"><field name="client"/></span>
                    </div>
                    <div>
                      <field name="max_price"/> â‚¬
                    </div>
                  </div>
                </div>
              </t>
            </templates>
      </kanban>
    </field>
  </record>

  <record id="view_product_searcher_calendar" model="ir.ui.view">
    <field name="name">product.searcher_calendar</field>
    <field name="model">product.searcher</field>
    <field name="arch" type="xml">
      <calendar date_start="max_date" date_stop="max_date">
        <field name="product_name"/>
        <field name="client"/>
        <field name="max_price"/>
      </calendar>
    </field>
  </record>

  <record id="product_searcher_view_form" model="ir.ui.view">
    <field name="name">product.searcher_form</field>
    <field name="model">product.searcher</field>
    <field name="arch" type="xml">
      <form string="Product Searcher">
        <field name="operating_unit_id"
               options="{'no_create': True}" 
               groups="product_searcher.group_product_searcher_operator" />
        <field name="product_name"/>
        <field name="description"/>
        <field name="phone"/>
        <field name="email"/>
        <field name="max_price"/>
        <field name="quality"/>
        <field name="max_date"/>
        <field name="status"/>
        <field name="buy_date"/>
        <field name="notify_date"/>
      </form>
    </field>
  </record>

  <record id="product_searcher_view_filter" model="ir.ui.view">
    <field name="name">product.searcher_filter</field>
    <field name="model">product.searcher</field>
    <field name="arch" type="xml">
      <search string="Product Searches">
        <field name="operating_unit_id" groups="product_searcher.group_product_searcher_operator"/>
        <field name="status"/>
        <field name="quality"/>
        <filter name="status_cancel" string="Cancel" domain="[('status', '=', 'cancel')]"/>
        <filter name="status_approved" string="Approved" domain="[('status', '=', 'approved')]"/>
        <filter name="status_active" string="Active" domain="['|', ('status', '=', 'pending'), ('status', '=', 'process')]"/>
        <filter name="group_default_operating_unit" string="Default Operating Unit" context="{'group_by':'operating_unit_id'}"/>
        <filter name="group_status" string="status" context="{'group_by':'status'}"/>
        <filter name="group_quality" string="Quality" context="{'group_by':'quality'}"/>
        <filter name="group_applicant" string="Applicant" context="{'group_by':'applicant_id'}"/>
      </search>
    </field>
  </record>

  <!-- Actions -->
  <record id="action_product_searcher" model="ir.actions.act_window">
    <field name="name">Product Searcher</field>
    <field name="res_model">product.searcher</field>
    <field name="view_mode">tree,kanban,calendar,form</field>
    <field name="search_view_id" ref="product_searcher_view_filter"/>
  </record>

  <record id="action_product_searcher_active" model="ir.actions.act_window">
    <field name="name">Product Searcher Active</field>
    <field name="res_model">product.searcher</field>
    <field name="view_mode">tree,kanban,calendar,form</field>
    <field name="search_view_id" ref="product_searcher_view_filter"/>
    <field name="context">{'search_default_status_active': 1}</field>
  </record>

  <record id="action_product_searcher_cancel" model="ir.actions.act_window">
    <field name="name">Product Searcher Cancel</field>
    <field name="res_model">product.searcher</field>
    <field name="view_mode">tree,kanban,calendar,form</field>
    <field name="search_view_id" ref="product_searcher_view_filter"/>
    <field name="context">{'search_default_status_cancel': 1}</field>
  </record>

  <record id="action_product_searcher_approved" model="ir.actions.act_window">
    <field name="name">Product Searcher Approved</field>
    <field name="res_model">product.searcher</field>
    <field name="view_mode">tree,kanban,calendar,form</field>
    <field name="search_view_id" ref="product_searcher_view_filter"/>
    <field name="context">{'search_default_status_approved': 1}</field>
  </record>


  <!-- Menus -->
  <menuitem
      id="menu_product_searcher_root"
      name="Product Searcher"
      web_icon="product_searcher,static/description/icon.png"/>

  <menuitem id="menu_product_searcher_active" name="Active Searches"
    parent="menu_product_searcher_root"
    sequence="10"
    action="action_product_searcher_active"/>
  
  <menuitem id="menu_product_searcher_cancel" name="Cancelled Searches"
    parent="menu_product_searcher_root"
    sequence="20"
    action="action_product_searcher_cancel"/>

  <menuitem id="menu_product_searcher_approved" name="Approved Searches"
    parent="menu_product_searcher_root"
    sequence="30"
    action="action_product_searcher_approved"/>

  <menuitem id="menu_product_searcher_management" name="Total Searches"
    parent="menu_product_searcher_root"
    sequence="40"
    action="action_product_searcher"/>

</odoo>
